{"ast":null,"code":"import _slicedToArray from\"/Users/volkovilya/dev/diploma-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import About from\"../About/About\";import NewsCardList from\"../NewsCardList/NewsCardList\";import SearchForm from\"../SearchForm/SearchForm\";import NewsApi from\"../../utils/NewsApi\";import Preloader from\"../Preloader/Preloader\";import{url,update,size,apiKey}from\"../../utils/Utils\";import ErrorNewsApi from\"../Errors/ErrorsNewsApi/ErrorNewsApi\";function Main(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),newsCards=_React$useState2[0],setNewsCards=_React$useState2[1];var _React$useState3=React.useState(undefined),_React$useState4=_slicedToArray(_React$useState3,2),totalResult=_React$useState4[0],setTotalResult=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isPreloader=_React$useState6[0],setIsPreloader=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isErrorServer=_React$useState8[0],setisErrorServer=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),errorMessage=_React$useState10[0],setErrorMessage=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isSearchResult=_React$useState12[0],setIsSearchResult=_React$useState12[1];var _React$useState13=React.useState(3),_React$useState14=_slicedToArray(_React$useState13,2),showItems=_React$useState14[0],setshowItems=_React$useState14[1];function handleShowMeMore(){setshowItems(showItems+3);setTotalResult(totalResult-3);}function handleUpdateKeyword(onUpdateKeyword){var newsApi=new NewsApi(url,onUpdateKeyword,update,size,apiKey);setisErrorServer(false);setIsPreloader(true);setTotalResult(undefined);setNewsCards([]);setshowItems(3);newsApi.getNewsCards().then(function(res){setIsSearchResult(true);setTotalResult(res.totalResults);setNewsCards(res.articles);setIsPreloader(false);}).catch(function(err){if(err===429){setIsPreloader(false);setErrorMessage(\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 \".concat(err,\" \\u0421\\u043B\\u0438\\u0448\\u043A\\u043E\\u043C \\u043C\\u043D\\u043E\\u0433\\u043E \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u043E\\u0432 \\u0434\\u043B\\u044F \\u0431\\u0435\\u0441\\u043F\\u043B\\u0430\\u0442\\u043D\\u043E\\u0439 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u043E 50 \\u0448\\u0442 \\u043A\\u0430\\u0436\\u0434\\u044B\\u0435 12 \\u0447\\u0430\\u0441\\u043E\\u0432\"));setisErrorServer(true);}else{setErrorMessage(\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 \".concat(err,\" \\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440\\u0430\"));}});}return/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"main\",{className:\"main__cover\",children:/*#__PURE__*/_jsx(SearchForm,{onUpdateKeyword:handleUpdateKeyword})}),/*#__PURE__*/_jsx(Preloader,{isPreloader:isPreloader}),/*#__PURE__*/_jsx(ErrorNewsApi,{isErrorServer:isErrorServer,errorMessage:errorMessage}),/*#__PURE__*/_jsx(NewsCardList,{newsCards:newsCards,totalResult:totalResult,isSearchResult:isSearchResult,showItems:showItems,handleShowMeMore:handleShowMeMore}),/*#__PURE__*/_jsx(About,{})]});}export default Main;","map":{"version":3,"sources":["/Users/volkovilya/dev/diploma-frontend/src/components/Main/Main.js"],"names":["React","About","NewsCardList","SearchForm","NewsApi","Preloader","url","update","size","apiKey","ErrorNewsApi","Main","useState","newsCards","setNewsCards","undefined","totalResult","setTotalResult","isPreloader","setIsPreloader","isErrorServer","setisErrorServer","errorMessage","setErrorMessage","isSearchResult","setIsSearchResult","showItems","setshowItems","handleShowMeMore","handleUpdateKeyword","onUpdateKeyword","newsApi","getNewsCards","then","res","totalResults","articles","catch","err"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport About from \"../About/About\";\nimport NewsCardList from \"../NewsCardList/NewsCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport NewsApi from \"../../utils/NewsApi\";\nimport Preloader from \"../Preloader/Preloader\";\nimport { url, update, size, apiKey } from \"../../utils/Utils\";\nimport ErrorNewsApi from \"../Errors/ErrorsNewsApi/ErrorNewsApi\";\n\nfunction Main() {\n  const [newsCards, setNewsCards] = React.useState([]);\n  const [totalResult, setTotalResult] = React.useState(undefined);\n  const [isPreloader, setIsPreloader] = React.useState(false);\n  const [isErrorServer, setisErrorServer] = React.useState(false);\n  const [errorMessage, setErrorMessage] = React.useState(\"\");\n  const [isSearchResult, setIsSearchResult] = React.useState(false);\n  const [showItems, setshowItems] = React.useState(3);\n\n  function handleShowMeMore() {\n    setshowItems(showItems + 3);\n    setTotalResult(totalResult - 3);\n  }\n\n  function handleUpdateKeyword(onUpdateKeyword) {\n    const newsApi = new NewsApi(url, onUpdateKeyword, update, size, apiKey);\n    setisErrorServer(false);\n    setIsPreloader(true);\n    setTotalResult(undefined);\n    setNewsCards([]);\n    setshowItems(3);\n    newsApi\n      .getNewsCards()\n      .then((res) => {\n        setIsSearchResult(true);\n        setTotalResult(res.totalResults);\n        setNewsCards(res.articles);\n        setIsPreloader(false);\n      })\n      .catch((err) => {\n        if (err === 429) {\n          setIsPreloader(false);\n          setErrorMessage(\n            `Статус ${err} Слишком много запросов для бесплатной версии доступно 50 шт каждые 12 часов`\n          );\n          setisErrorServer(true);\n        } else {\n          setErrorMessage(`Статус ${err} Ошибка сервера`);\n        }\n      });\n  }\n\n  return (\n    <div className=\"main\">\n      <main className=\"main__cover\">\n        <SearchForm onUpdateKeyword={handleUpdateKeyword} />\n      </main>\n      <Preloader isPreloader={isPreloader} />\n      <ErrorNewsApi isErrorServer={isErrorServer} errorMessage={errorMessage} />\n      <NewsCardList\n        newsCards={newsCards}\n        totalResult={totalResult}\n        isSearchResult={isSearchResult}\n        showItems={showItems}\n        handleShowMeMore={handleShowMeMore}\n      />\n      <About />\n    </div>\n  );\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}