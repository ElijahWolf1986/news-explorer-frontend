{"ast":null,"code":"import _slicedToArray from\"/Users/volkovilya/dev/diploma-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import PopupWithForm from'./PopupWithForm/PopupWithForm';import{handleValidationEmail,handleValidationPassword,handleValidationTextInputRequired}from\"../utils/ValidationForm\";function Register(props){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),name=_React$useState6[0],setName=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),errMessageEmail=_React$useState8[0],setErrMessageEmail=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),errMessagePassword=_React$useState10[0],setErrMessagePassword=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),errMessageName=_React$useState12[0],setErrMessageName=_React$useState12[1];var _React$useState13=React.useState(true),_React$useState14=_slicedToArray(_React$useState13,2),isButtonSaveDisabled=_React$useState14[0],setButtonSaveDisabled=_React$useState14[1];var resetForm=function resetForm(){setEmail(\"\");setPassword(\"\");setName(\"\");setErrMessageEmail(\"\");setErrMessagePassword(\"\");setErrMessageName(\"\");};var handleSubmit=function handleSubmit(evt){//решает какую ошибку и где выводить пользователю при неверной валидации\nevt.preventDefault();if(handleValidationEmail(email)&&handleValidationPassword(password)&&handleValidationTextInputRequired(name)){props.onRegister(email,password,name);resetForm();}else{if(!handleValidationEmail(email))setErrMessageEmail(\"Неправильный формат email\");if(!handleValidationPassword(password))setErrMessagePassword(\"Пароль введен неверно\");if(!handleValidationTextInputRequired(name))setErrMessageName(\"Поле Имя обязательно для заполнения\");return;}};var handleChangeEmail=function handleChangeEmail(evt){setEmail(evt.target.value);setErrMessageEmail(\"\");};var handleChangePassword=function handleChangePassword(evt){setPassword(evt.target.value);setErrMessagePassword(\"\");};var handleChangeName=function handleChangeName(evt){setName(evt.target.value);setErrMessageName(\"\");};React.useEffect(function(){//устанавливает кнопку сохранить в нужную кондицию при изменении полей ввода\nif(email&&password&&name){setButtonSaveDisabled(false);}else{setButtonSaveDisabled(true);}},[handleChangeEmail,handleChangePassword,handleChangeName]);React.useEffect(function(){//сбрасывает форму при выходе из нее даже если пользователь не дошел до отправки формы и передумал заполнять\nif(props.onResetForm){resetForm();}},[props.onClose]);return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"popup_auth\",title:\"\\u0412\\u0445\\u043E\\u0434\",isOpen:props.isOpen,onClose:props.onClose,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"fieldset\",{className:\"popup__form-auth\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"popup__label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email||'',onChange:handleChangeEmail,name:\"email\",required:true,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0447\\u0442\\u0443\",className:\"popup__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error_visible\",children:errMessageEmail}),/*#__PURE__*/_jsx(\"label\",{className:\"popup__label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password||'',onChange:handleChangePassword,name:\"password\",required:true,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",className:\"popup__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error_visible\",children:errMessagePassword}),/*#__PURE__*/_jsx(\"label\",{className:\"popup__label\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name||'',onChange:handleChangeName,name:\"name\",required:true,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0435 \\u0438\\u043C\\u044F\",className:\"popup__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error_visible\",children:errMessageName})]}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__server-error_visible\",children:props.onServerErrorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"popup__button-save \".concat(isButtonSaveDisabled&&\"popup__button-save_disabled\"),disabled:isButtonSaveDisabled,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0435\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup__redirect\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"popup__redirect-paragraph\",children:\"\\u0438\\u043B\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:\"popup__redirect-link\",onClick:props.redirect,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]});}export default Register;","map":{"version":3,"sources":["/Users/volkovilya/dev/diploma-frontend/src/components/Register.js"],"names":["React","PopupWithForm","handleValidationEmail","handleValidationPassword","handleValidationTextInputRequired","Register","props","useState","email","setEmail","password","setPassword","name","setName","errMessageEmail","setErrMessageEmail","errMessagePassword","setErrMessagePassword","errMessageName","setErrMessageName","isButtonSaveDisabled","setButtonSaveDisabled","resetForm","handleSubmit","evt","preventDefault","onRegister","handleChangeEmail","target","value","handleChangePassword","handleChangeName","useEffect","onResetForm","onClose","isOpen","onServerErrorMessage","redirect"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PopupWithForm from './PopupWithForm/PopupWithForm';\nimport {handleValidationEmail, handleValidationPassword, handleValidationTextInputRequired} from \"../utils/ValidationForm\";\n\nfunction Register(props) {\n    const [email, setEmail] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n    const [name, setName] = React.useState(\"\");\n\n    const [errMessageEmail, setErrMessageEmail] = React.useState(\"\");\n    const [errMessagePassword, setErrMessagePassword] = React.useState(\"\");\n    const [errMessageName, setErrMessageName] = React.useState(\"\");\n\n    const [isButtonSaveDisabled, setButtonSaveDisabled] = React.useState(true);\n\n    const resetForm = () => {\n        setEmail(\"\");\n        setPassword(\"\");\n        setName(\"\");\n        setErrMessageEmail(\"\");\n        setErrMessagePassword(\"\");\n        setErrMessageName(\"\");\n      };\n    \n      const handleSubmit = (evt) => { //решает какую ошибку и где выводить пользователю при неверной валидации\n        evt.preventDefault();\n        if (handleValidationEmail(email) && handleValidationPassword(password) && handleValidationTextInputRequired(name)) {\n            props.onRegister(email, password, name);\n            resetForm();\n        } else {\n            if (!handleValidationEmail(email))  setErrMessageEmail(\"Неправильный формат email\");\n            if (!handleValidationPassword(password))  setErrMessagePassword(\"Пароль введен неверно\");\n            if (!handleValidationTextInputRequired(name))  setErrMessageName(\"Поле Имя обязательно для заполнения\");\n            return\n        }\n      };\n    \n      const handleChangeEmail = (evt) => {\n        setEmail(evt.target.value);\n        setErrMessageEmail(\"\");\n      };\n    \n      const handleChangePassword = (evt) => {\n        setPassword(evt.target.value);\n        setErrMessagePassword(\"\");\n\n      };\n\n      const handleChangeName = (evt) => {\n        setName(evt.target.value);\n        setErrMessageName(\"\");  \n      };\n\n      React.useEffect(() => { //устанавливает кнопку сохранить в нужную кондицию при изменении полей ввода\n        if (email && password && name) {\n          setButtonSaveDisabled(false);\n        } else {\n          setButtonSaveDisabled(true);\n        }\n\n      }, [handleChangeEmail, handleChangePassword, handleChangeName]);\n\n      React.useEffect(() => { //сбрасывает форму при выходе из нее даже если пользователь не дошел до отправки формы и передумал заполнять\n        if (props.onResetForm) {\n          resetForm();\n        } \n      }, [props.onClose]);\n    \n    return (\n        <PopupWithForm name='popup_auth' title='Вход' isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit} >\n            <fieldset className=\"popup__form-auth\">\n                <label className=\"popup__label\">Email</label>\n                <input type=\"email\" value={email || ''} onChange={handleChangeEmail} name=\"email\" required placeholder=\"Введите почту\" className=\"popup__input\" />\n                <span className=\"popup__error_visible\">{errMessageEmail}</span>\n                <label className=\"popup__label\">Пароль</label>\n                <input type=\"password\" value={password || ''} onChange={handleChangePassword} name=\"password\" required placeholder=\"Введите пароль\" className=\"popup__input\" />\n                <span className=\"popup__error_visible\">{errMessagePassword}</span>\n                <label className=\"popup__label\">Имя</label>\n                <input type=\"text\" value={name || ''} onChange={handleChangeName} name=\"name\" required placeholder=\"Введите свое имя\" className=\"popup__input\" />\n                <span className=\"popup__error_visible\">{errMessageName}</span>\n            </fieldset>\n            <span className=\"popup__server-error_visible\">{props.onServerErrorMessage}</span>\n            <button type=\"submit\" className={`popup__button-save ${isButtonSaveDisabled && \"popup__button-save_disabled\"}`} disabled={isButtonSaveDisabled}>Зарегестрироваться</button>\n            <div className=\"popup__redirect\">\n                <p className=\"popup__redirect-paragraph\">или</p>\n                <button className=\"popup__redirect-link\" onClick={props.redirect}>Войти</button>\n            </div>\n        </PopupWithForm>\n    )\n}\n\nexport default Register;   "]},"metadata":{},"sourceType":"module"}