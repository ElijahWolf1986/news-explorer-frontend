{"ast":null,"code":"import _slicedToArray from\"/Users/volkovilya/dev/diploma-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import PopupWithForm from'./PopupWithForm/PopupWithForm';import{handleValidationEmail,handleValidationPassword}from\"../utils/ValidationForm\";function Login(props){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),errMessageEmail=_React$useState6[0],setErrMessageEmail=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),errMessagePassword=_React$useState8[0],setErrMessagePassword=_React$useState8[1];var _React$useState9=React.useState(true),_React$useState10=_slicedToArray(_React$useState9,2),isButtonSaveDisabled=_React$useState10[0],setButtonSaveDisabled=_React$useState10[1];var resetForm=function resetForm(){setEmail(\"\");setPassword(\"\");setErrMessageEmail(\"\");setErrMessagePassword(\"\");};var handleSubmit=function handleSubmit(evt){//решает какую ошибку и где выводить пользователю при неверной валидации\nevt.preventDefault();if(handleValidationEmail(email)&&handleValidationPassword(password)){props.onLogin(email,password);resetForm();}else{if(!handleValidationEmail(email))setErrMessageEmail(\"Неправильный формат email\");if(!handleValidationPassword(password))setErrMessagePassword(\"Пароль введен неверно\");return;}};var handleChangeEmail=function handleChangeEmail(evt){setEmail(evt.target.value);setErrMessageEmail(\"\");};var handleChangePassword=function handleChangePassword(evt){setPassword(evt.target.value);setErrMessagePassword(\"\");};React.useEffect(function(){//устанавливает кнопку сохранить в нужную кондицию при изменении полей ввода\nif(email&&password){setButtonSaveDisabled(false);}else{setButtonSaveDisabled(true);}},[handleChangeEmail,handleChangePassword]);React.useEffect(function(){//сбрасывает форму при выходе из нее даже если пользователь не дошел до отправки формы и передумал заполнять\nif(props.onResetForm){resetForm();}},[props.onClose]);return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"popup_auth\",title:\"\\u0412\\u0445\\u043E\\u0434\",isOpen:props.isOpen,onClose:props.onClose,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"fieldset\",{className:\"popup__form-auth\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"popup__label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email||'',onChange:handleChangeEmail,name:\"email\",required:true,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0447\\u0442\\u0443\",className:\"popup__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error_visible\",children:errMessageEmail}),/*#__PURE__*/_jsx(\"label\",{className:\"popup__label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password||'',onChange:handleChangePassword,name:\"password\",required:true,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",className:\"popup__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error_visible\",children:errMessagePassword})]}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__server-error_visible\",children:props.onServerErrorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"popup__button-save \".concat(isButtonSaveDisabled&&\"popup__button-save_disabled\"),disabled:isButtonSaveDisabled,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup__redirect\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"popup__redirect-paragraph\",children:\"\\u0438\\u043B\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:\"popup__redirect-link\",onClick:props.redirect,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0435\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})]});}export default Login;","map":{"version":3,"sources":["/Users/volkovilya/dev/diploma-frontend/src/components/Login.js"],"names":["React","PopupWithForm","handleValidationEmail","handleValidationPassword","Login","props","useState","email","setEmail","password","setPassword","errMessageEmail","setErrMessageEmail","errMessagePassword","setErrMessagePassword","isButtonSaveDisabled","setButtonSaveDisabled","resetForm","handleSubmit","evt","preventDefault","onLogin","handleChangeEmail","target","value","handleChangePassword","useEffect","onResetForm","onClose","isOpen","onServerErrorMessage","redirect"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PopupWithForm from './PopupWithForm/PopupWithForm';\nimport {handleValidationEmail, handleValidationPassword} from \"../utils/ValidationForm\";\n\nfunction Login(props) {\n    const [email, setEmail] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n    const [errMessageEmail, setErrMessageEmail] = React.useState(\"\");\n    const [errMessagePassword, setErrMessagePassword] = React.useState(\"\");\n    const [isButtonSaveDisabled, setButtonSaveDisabled] = React.useState(true);\n\n    const resetForm = () => {\n        setEmail(\"\");\n        setPassword(\"\");\n        setErrMessageEmail(\"\");\n        setErrMessagePassword(\"\");\n      };\n    \n      const handleSubmit = (evt) => { //решает какую ошибку и где выводить пользователю при неверной валидации\n        evt.preventDefault();\n        if (handleValidationEmail(email) && handleValidationPassword(password)) {\n            props.onLogin(email, password);\n            resetForm();\n        } else {\n            if (!handleValidationEmail(email))  setErrMessageEmail(\"Неправильный формат email\");\n            if (!handleValidationPassword(password))  setErrMessagePassword(\"Пароль введен неверно\");\n            return\n        }\n      };\n\n    \n      const handleChangeEmail = (evt) => {\n        setEmail(evt.target.value);\n        setErrMessageEmail(\"\");\n      };\n    \n      const handleChangePassword = (evt) => {\n        setPassword(evt.target.value);\n        setErrMessagePassword(\"\");\n      };\n\n      React.useEffect(() => { //устанавливает кнопку сохранить в нужную кондицию при изменении полей ввода\n        if (email && password) {\n          setButtonSaveDisabled(false);\n        } else {\n          setButtonSaveDisabled(true);\n        }\n\n      }, [handleChangeEmail, handleChangePassword]);\n\n      React.useEffect(() => { //сбрасывает форму при выходе из нее даже если пользователь не дошел до отправки формы и передумал заполнять\n        if (props.onResetForm) {\n          resetForm();\n        } \n      }, [props.onClose]);\n    \n    return (\n        <PopupWithForm name='popup_auth' title='Вход' isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit} >\n            <fieldset className=\"popup__form-auth\">\n                <label className=\"popup__label\">Email</label>\n                <input type=\"email\" value={email || ''} onChange={handleChangeEmail} name=\"email\" required placeholder=\"Введите почту\" className=\"popup__input\" />\n                <span className=\"popup__error_visible\">{errMessageEmail}</span>\n                <label className=\"popup__label\">Пароль</label>\n                <input type=\"password\" value={password || ''} onChange={handleChangePassword} name=\"password\" required placeholder=\"Введите пароль\" className=\"popup__input\" />\n                <span className=\"popup__error_visible\">{errMessagePassword}</span>\n            </fieldset>\n            <span className=\"popup__server-error_visible\">{props.onServerErrorMessage}</span>\n            <button type=\"submit\" className={`popup__button-save ${isButtonSaveDisabled && \"popup__button-save_disabled\"}`} disabled={isButtonSaveDisabled}>Сохранить</button>\n            <div className=\"popup__redirect\">\n                <p className=\"popup__redirect-paragraph\">или</p>\n                <button className=\"popup__redirect-link\" onClick={props.redirect}>Зарегестрироваться</button>\n            </div>\n        </PopupWithForm>\n    )\n}\n\nexport default Login;   \n"]},"metadata":{},"sourceType":"module"}